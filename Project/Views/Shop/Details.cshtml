@using Project.Models
@model DetailsViewModel
@{
    ViewBag.Title = "Details";
}

<div class="container mt-4">
    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white shadow-sm">
                    <li class="breadcrumb-item"><a href="index.html" class="no-underline">Home</a></li>
                    <li class="breadcrumb-item"><a href="shop.html" class="no-underline">Shop</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Details</li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-3">
            @Html.Partial("_SideBar",Model.sidebar)
        </div>
        <div class="col-9 mt-3">
            <div class="row mb-4">
                <div class="col">
                    <div id="carousel-slide" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner shadow-sm">
                            
                            <div class="carousel-item active">
                                <img class="d-block w-100" src="../../@Model.product.ProductImg1" alt="@Model.product.ProductTitle" class="img-responsive">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="../../@Model.product.ProductImg2" alt="@Model.product.ProductTitle" class="img-responsive">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="../../@Model.product.ProductImg3" alt="@Model.product.ProductTitle" class="img-responsive">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carousel-slide" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carousel-slide" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <div class="col-12">
                            @using (Html.BeginForm("Add", "Shop", FormMethod.Get))
                            {
                                <div class="product-detail-selection bg-white shadow-sm px-5 py-2 rounded">
                                    <h3 class="product-detail-title py-4 text-center font-weight-bold">@Model.product.ProductTitle</h3>
                                    <div class="product-detail-body">
                                        <div class="form-group row pb-1">
                                            <label for="productQuantity" class="col-4 col-form-label pr-3" style="white-space:nowrap">Product Quantity</label>
                                            <div class="col-8">
                                                <select name="product-quantity" id="productQuantity" class="form-control">
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row pb-1">
                                            <label for="productSize" class="col-4 col-form-label pr-3">Product Size</label>
                                            <div class="col-8">
                                                <select name="product-quantity" id="productSize" class="form-control">
                                                    @foreach (var sizename in Model.product.size)
                                                    {
                                                        <option value="@sizename.Id">@sizename.size</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row pb-1">
                                            <label for="productPrice" class="col-4 col-form-label pr-3">Product Price</label>
                                            <div class="col-8">
                                                <div class="col-form-label" id="productPrice" data-price="@Model.product.ProductPrice">$@Model.product.ProductPrice</div>
                                            </div>
                                        </div>
                                        <div class="form-group row pb-1">
                                            <label for="totalPrice" class="col-4 col-form-label pr-3">Total Price</label>
                                            <div class="col-8 pr-5">
                                                <div class="col-form-label" id="totalPrice">$59</div>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-12 text-center">
                                                <a href="/Shop/Add?id=@Model.product.Id&ProductName=@Model.product.ProductTitle&UnitPrice=@Model.product.ProductPrice&Quantity=1&SizeId=1&ImageUrl=@Model.product.ProductImg1" class="btn btn-success shadow-sm"  id="addtocart" data-cart="@Model.product.Id"><i class="fa fa-shopping-cart"> Add to Cart</i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="row my-3">
                        <div class="col">
                            <img src="../../@Model.product.ProductImg1" alt="@Model.product.ProductTitle" class="img-fluid img-responsive shadow-sm">
                        </div>
                        <div class="col">
                            <img src="../../@Model.product.ProductImg2" alt="@Model.product.ProductTitle" class="img-fluid img-responsive shadow-sm">
                        </div>
                        <div class="col">
                            <img src="../../@Model.product.ProductImg3" alt="@Model.product.ProductTitle" class="img-fluid img-responsive shadow-sm">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="product-details-banner shadow-sm bg-white rounded p-5">
                        <h1 class="display-5">Product Details</h1>
                        <p class="text-lead banner-style">
                           @Model.product.ProductDesc
                        </p>
                        <h1 class="display-5">Size</h1>
                        <ul class="list-group">                            
                            <li class="list-group-item">Small</li>
                            <li class="list-group-item">Medium</li>
                            <li class="list-group-item">Large</li>
                            <li class="list-group-item">Extra Large</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="like-product bg-white shadow-sm rounded py-3 px-4 my-3">
                        <h4 class=" font-weight-bold">You may also like these Products</h4>
                    </div>
                </div>
            </div>
            <div class="row">
                @foreach (var prod in Model.byproductcategories)
                {
                    if (Model.byproductcategories.IndexOf(prod) <= 3)
                    {
                        <div class="col">
                            <img src="../../@prod.ProductImg1" alt="product" class="img-fluid img-responsive shadow-sm">
                        </div>
                    }
                    else
                    {
                        break;
                    }
                }
            </div>
        </div>
    </div>
</div>
@section getCartForm{
    <script type="text/javascript">
        $(document).ready(function () {
            var qty = 1;
            var sizeid = 1;
            $("#addtocart").attr("href", "/Shop/Add?id=@Model.product.Id&ProductName=@Model.product.ProductTitle&UnitPrice=@Model.product.ProductPrice&Quantity=" + qty + "&SizeId=" + sizeid + "&ImageUrl=@Model.product.ProductImg1")
            var price = $("#productPrice").attr("data-price");
            $("#totalPrice").text("$" + price);
            $("#productQuantity").change(function () {
                qty = $(this).children("option:selected").val();
                var totalprice = price * qty;
                $("#totalPrice").text("$" + (totalprice));
                $("#addtocart").attr("href", "/Shop/Add?id=@Model.product.Id&ProductName=@Model.product.ProductTitle&UnitPrice=@Model.product.ProductPrice&Quantity=" + qty + "&SizeId=" + sizeid + "&ImageUrl=@Model.product.ProductImg1")
                
            })
            $("#productSize").change(function () {
                sizeid = $(this).children("option:selected").val();
                $("#addtocart").attr("href", "/Shop/Add?id=@Model.product.Id&ProductName=@Model.product.ProductTitle&UnitPrice=@Model.product.ProductPrice&Quantity=" + qty + "&SizeId=" + sizeid + "& ImageUrl=@Model.product.ProductImg1")

            })
        })

    </script>
    
        
    })
    }
